<!DOCTYPE html>
<html lang="es">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>Juego de Relacionar Palabras</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      text-align: center;
      padding: 40px;
    }

    h1 {
      color: #333;
    }

    .container {
      display: flex;
      justify-content: center;
      gap: 80px;
      margin-top: 30px;
    }

    .columns-wrapper {
      display: flex;
      gap: 20px;
    }

    .column {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .word {
      padding: 10px 15px;
      background-color: #fff;
      border: 2px solid #ccc;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s;
      width: 120px;
      text-align: center;
    }

    .word:hover {
      background-color: #eef;
    }

    .selected {
      background-color: #ffe082 !important;
      border-color: #ffb300 !important;
    }

    .matched {
      background-color: #c8e6c9;
      border-color: #2e7d32;
      pointer-events: none;
    }

    .incorrect {
      background-color: #ffcdd2;
      border-color: #c62828;
    }

    .reset, .next-level {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #1976d2;
      color: white;
      border: none;
      border-radius: 6px;
    }

    .hidden {
      display: none;
    }

    .finished-message {
      font-size: 24px;
      margin-top: 30px;
      color: #2e7d32;
    }

  </style>
</head>
<body>
  <h1>Relaciona las Palabras</h1>
  <p>Haz clic en una palabra en inglÃ©s para escucharla, y luego en su traducciÃ³n en espaÃ±ol.</p>

  <div class="container">
    <div class="columns-wrapper" id="english-wrapper"></div>
    <div class="columns-wrapper" id="spanish-wrapper"></div>
  </div>

  <button class="reset" onclick="resetGame()">Reiniciar</button>
  <button class="next-level hidden" onclick="nextLevel()">Siguiente Nivel</button>

  <div class="finished-message hidden" id="end-message">Â¡Has completado todas las palabras! ðŸŽ‰</div>

  <script>
    const allWords = [
      { en: "stool", es: "silla pequeÃ±a" },
      { en: "prize", es: "premio" },
      { en: "cabbage", es: "col" },
      { en: "mattress", es: "colchon" },
      { en: "Baker", es: "panadero" },
      { en: "net", es: "red" },
      { en: "sooner", es: "antes" },
      { en: "bush", es: "arbusto" },
      { en: "wide", es: "amplio ancho" },
      { en: "trap", es: "trampa" },
      { en: "Western", es: "occidental" },
      { en: "achievement", es: "Logro" },
      { en: "trust", es: "confianza" },
      { en: "concerning", es: "referente a" },
      { en: "cabinet", es: "gabinete" },
      { en: "appliances", es: "accesorios" },
      { en: "cheerful", es: "alegre" },
      { en: "strike", es: "golpear" },
      { en: "trade", es: "comercio" },
      { en: "alley", es: "callejÃ³n" },
      { en: "broad", es: "amplio" },
      { en: "needle", es: "aguja" },
      { en: "heel", es: "tacon" },
      { en: "tire", es: "llanta" },
      { en: "shade", es: "sombra" },
      { en: "sand", es: "arena" },
      { en: "spot", es: "lugar" },
      { en: "spread", es: "desparramar" },
      { en: "trouble", es: "problema" },
      { en: "loud", es: "fuerte" },
      { en: "shout", es: "gritar" },
      { en: "shut", es: "cerrar" },
      { en: "hip", es: "cadera" },
      { en: "elder", es: "mayor" },
      { en: "silk", es: "seda" },
      { en: "narrow", es: "estrecho" },
      { en: "trail", es: "camino sendero" },
      { en: "breathtaking", es: "asombroso" },
      { en: "set up", es: "configuraciÃ³n" },
      { en: "neat", es: "limpio ordenado" },
      { en: "wound", es: "herida" },
      { en: "tram", es: "tranvia" },
      { en: "carry", es: "llevar" },
      { en: "dive", es: "bucear" },
      { en: "brochure", es: "folleto" },
      { en: "grab", es: "agarrar" },
      { en: "move", es: "mudarse" },
      { en: "gears", es: "engranajes velocidades" },
      { en: "pleasant", es: "agradable" },
      { en: "dull", es: "aburrido" },
      { en: "spoil", es: "mimar arruinar" },
      { en: "post", es: "correo" },
      { en: "shield", es: "blindaje" },
      { en: "spark", es: "chispa" },
      { en: "lazy", es: "peresoso" },
      { en: "slide", es: "deslizar" },
      { en: "slice", es: "rebanada" },
      { en: "whole", es: "entero" },
      { en: "steal", es: "robar" },
      { en: "bill", es: "factura" },
      { en: "west", es: "oeste" },
      { en: "regarding", es: "referente a" },
      { en: "failure", es: "fracaso" },
      { en: "thankful", es: "agradecido" }
    ];

    let nivel = 0;
    const palabrasPorNivel = 6;
    let palabrasRevisadas = [];
    let currentWords = [];
    let selectedEnglish = null;
    let matchedPairs = [];

    function speak(word) {
      const utter = new SpeechSynthesisUtterance(word);
      utter.lang = "en-US";
      speechSynthesis.speak(utter);
    }

    function resetGame() {
      nivel = 0;
      palabrasRevisadas = [];
      document.querySelector(".next-level").classList.add("hidden");
      document.getElementById("end-message").classList.add("hidden");
      startGame();
    }

    function nextLevel() {
      nivel++;
      document.querySelector(".next-level").classList.add("hidden");
      startGame();
    }

    function startGame() {
      selectedEnglish = null;
      matchedPairs = [];

      const remainingWords = allWords.filter(w => !palabrasRevisadas.includes(w.en));
      const cantidad = Math.min(palabrasPorNivel, remainingWords.length);
      currentWords = remainingWords.slice(0, cantidad);

      // Marcar como ya revisadas
      palabrasRevisadas.push(...currentWords.map(w => w.en));

      // Mostrar mensaje final si no hay mÃ¡s palabras
      if (currentWords.length === 0) {
        document.getElementById("end-message").classList.remove("hidden");
        return;
      }

      const englishWrapper = document.getElementById('english-wrapper');
      const spanishWrapper = document.getElementById('spanish-wrapper');
      englishWrapper.innerHTML = "";
      spanishWrapper.innerHTML = "";

      const englishWords = [...currentWords].sort(() => Math.random() - 0.5);
      const spanishWords = [...currentWords].sort(() => Math.random() - 0.5);

      renderInColumns(englishWords, englishWrapper, true);
      renderInColumns(spanishWords, spanishWrapper, false);
    }

    function renderInColumns(wordsArray, container, isEnglish) {
      container.innerHTML = "";

      const rowsPerColumn = 6;
      const numColumns = Math.ceil(wordsArray.length / rowsPerColumn);

      for (let i = 0; i < numColumns; i++) {
        const col = document.createElement("div");
        col.className = "column";

        for (let j = 0; j < rowsPerColumn; j++) {
          const index = i * rowsPerColumn + j;
          if (index >= wordsArray.length) break;

          const wordObj = wordsArray[index];
          const word = document.createElement("div");
          word.className = "word";
          word.textContent = isEnglish ? wordObj.en : wordObj.es;

          if (isEnglish) {
            word.onclick = () => selectEnglish(wordObj.en, word);
          } else {
            word.onclick = () => selectSpanish(wordObj.es, word);
          }

          col.appendChild(word);
        }
        container.appendChild(col);
      }
    }

    function selectEnglish(word, element) {
      if (matchedPairs.includes(word)) return;
      speak(word);
      document.querySelectorAll('#english-wrapper .word').forEach(w => w.classList.remove("selected"));
      selectedEnglish = word;
      element.classList.add("selected");
    }

    function selectSpanish(spanishWord, spanishElement) {
      if (!selectedEnglish) return;

      const pair = currentWords.find(w => w.en === selectedEnglish);
      const englishElements = document.querySelectorAll("#english-wrapper .word");

      if (pair && pair.es === spanishWord) {
        matchedPairs.push(selectedEnglish);
        spanishElement.classList.add("matched");

        englishElements.forEach(el => {
          if (el.textContent === selectedEnglish) {
            el.classList.add("matched");
            el.classList.remove("selected");
          }
        });

        if (matchedPairs.length === currentWords.length) {
          if (palabrasRevisadas.length < allWords.length) {
            document.querySelector(".next-level").classList.remove("hidden");
          } else {
            document.getElementById("end-message").classList.remove("hidden");
          }
        }

      } else {
        spanishElement.classList.add("incorrect");
        setTimeout(() => spanishElement.classList.remove("incorrect"), 1000);
      }

      selectedEnglish = null;
      englishElements.forEach(w => w.classList.remove("selected"));
    }

    startGame();
  </script>
</body>
</html>
